\documentclass[12pt,a4paper]{article}
\setlength\textwidth{145mm}
\setlength\textheight{227mm}

\usepackage[a-2u]{pdfx}

%% Character encoding: usually latin2, cp1250 or utf8:
\usepackage[utf8]{inputenc}

%% Prefer Latin Modern fonts
\usepackage{lmodern}

%% Further useful packages (included in most LaTeX distributions)
\usepackage{amsmath}        % extensions for typesetting of math
\usepackage{amsfonts}       % math fonts
\usepackage{amsthm}         % theorems, definitions, etc.
\usepackage{bbding}         % various symbols (squares, asterisks, scissors, ...)
\usepackage{bm}             % boldface symbols (\bm)
\usepackage{graphicx}       % embedding of pictures
\usepackage{fancyvrb}       % improved verbatim environment
%\usepackage{natbib}         % citation style AUTHOR (YEAR), or AUTHOR [NUMBER]
\usepackage[style=ieee]{biblatex}
\usepackage[nottoc]{tocbibind} % makes sure that bibliography and the lists
\usepackage{dcolumn}        % improved alignment of table columns
\usepackage{booktabs}       % improved horizontal lines in tables
\usepackage{paralist}       % improved enumerate and itemize
\usepackage[usenames]{xcolor}  % typesetting in color
\usepackage{float}          % putting images at desired place

\hypersetup{unicode}
\hypersetup{breaklinks=true}
\DefineVerbatimEnvironment{code}{Verbatim}{fontsize=\small, frame=single}
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\begin{document}
\title{SnowPlow – specification}
\author{Ondřej Měkota}

\maketitle
\pagebreak
\tableofcontents
\pagebreak
\section{Introduction}

\par This program is a plugin to program \href{https://qgis.org/en/site/index.html}{QGIS 3.4}. 
Its main function is ease the usage of QGIS with road maps used for scheduling cars which remove snow.
The plugin uses colour to distinguish roads with different priorities to maintain them, and to distinguish method used for the maintenance. 
Also the plugin provides user option to display statistics of the cars and roads.

\section{Specification}
\begin{itemize}
    \item Selection of layer to which the plugin is applied.
    \item On the left of the window there settings – layer selection, row selection for the statistics, function (sum, avg, max, min) to apply on the remaining columns.
    \item The function can be different for every column.
    \item There is button to invoke colourization and labeling. It resets current colourization and makes new one for selected layer.
    \item Highlighting all (at once, or only selected) transits of selection of cars – roads, which are not maintained by the given cars but the cars use them for transport. 
    \item Plugin distinguishes data types of features in layers, ie. not summing over textual data. 
\end{itemize}

\pagebreak
\section{User Manual}
\subsection{Installation}
First install QGIS version 3.4 or higher. 
Then in "Plugin" $\rightarrow$ "Manage and install plugins" $\rightarrow$ "Install from ZIP" $\rightarrow$ \emph{select the path of the zip file} $\rightarrow$ "Install Plugin".
The plugin shall appear in the menu "Plugins".

\subsection{Using the application}
The plugin has one window, depicted in Figure \ref{window}, which contains all controls.
At the start user can select layer to which his further actions will be applied.
If the user adds more layer to his project after he has started the plugin, he may have to press \emph{Reload app} to make the plugin recognize the newly added layers.

\begin{figure}[H]\centering
\includegraphics[width=140mm]{./img/window.png}
\caption{Description of user interface}
\label{window}
\end{figure}

\subsubsection{Displaying statistics}
After selecting rows (features) for grouping, and optionally selecting grouping function, user will be presented with table containing statistics.
Data are grouped by Cartesian product of all unique values of selected features for grouping. 

\par For example in Figure \ref{window} features \emph{priority} and \emph{method} are selected and they have values \emph{1,2,3} and \emph{sold, inert, snowplow} respectively.
There are no rows corresponding to method \emph{inert} and priority \emph{1} so they are omitted.

\par Last row contains in each column value acquired by applying selected function on all rows.
Last column contains the number of rows corresponding to given group.

\subsubsection{Transits}
To highlight transits on the map use can either select each car whose transits he wishes to see or all car transits at once by clicking on \emph{Yes to All} button.
The resulting effect is in Figure \ref{transit}.

\begin{figure}[H]\centering
\includegraphics[width=120mm]{./img/transit.png}
\caption{Illustration of car transit.}
\label{transit}
\end{figure}

\subsubsection{Colouring and labeling maps}
Roads can be coloured according to their priority, by default priorities are 1, 2 and 3. 
Also roads can be distinguished by method used for their maintenance, by default inert, snowplow and salt. 
That is done by using more transparent colour and wider line.
\par This option is invoked on start of the plugin and also by pressing button \emph{Refresh}.
To turn off the colouring user needs to press \emph{Clear}.




\end{document}
